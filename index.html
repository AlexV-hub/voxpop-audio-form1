<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire Vox-Pop - Enregistrement Audio et Texte</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- √âcran de bienvenue -->
        <div id="welcome-screen" class="screen">
            <div class="container">
                <div class="welcome-card">
                    <div class="welcome-header">
                        <div class="icon-circle">
                            <i data-lucide="mic"></i>
                        </div>
                        <h1>Bienvenue dans le questionnaire Vox-Pop!</h1>
                    </div>
                    
                    <div class="instructions">
                        <div class="instruction-card blue">
                            <h3>üìã Instructions importantes :</h3>
                            <ul>
                                <li>‚Ä¢ Ce questionnaire contient <strong>11 questions</strong> sur votre projet</li>
                                <li>‚Ä¢ Vous pouvez r√©pondre par <strong>audio</strong> ou par <strong>√©crit</strong></li>
                                <li>‚Ä¢ Pour l'audio : autorisez l'acc√®s au microphone</li>
                                <li>‚Ä¢ Vous pouvez faire des pauses, r√©√©couter et modifier vos r√©ponses</li>
                                <li>‚Ä¢ Le questionnaire prend environ <strong>15-20 minutes</strong></li>
                            </ul>
                        </div>
                        
                        <div class="instruction-card green">
                            <h3>üéØ Objectif :</h3>
                            <p>Ce questionnaire nous aide √† mieux comprendre votre projet et vos besoins. 
                               Vos r√©ponses seront trait√©es automatiquement et de mani√®re s√©curis√©es pour g√©n√©rer un r√©sum√© personnalis√©.</p>
                        </div>
                        
                        <div class="instruction-card amber">
                            <h3>üîí Confidentialit√© :</h3>
                            <p>Vos donn√©es sont s√©curis√©es et ne seront utilis√©es que dans le cadre de l'√©valuation de votre projet.</p>
                        </div>
                    </div>
                    
                    <button id="start-btn" class="btn-primary large">
                        Commencer le questionnaire
                    </button>
                </div>
            </div>
        </div>

        <!-- √âcran questionnaire -->
        <div id="questionnaire-screen" class="screen hidden">
            <!-- Barre de progression -->
            <div class="progress-bar">
                <div class="progress-container">
                    <div class="progress-info">
                        <span id="progress-text">Question 1 sur 11</span>
                        <span id="progress-percent">9%</span>
                    </div>
                    <div class="progress-track">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                </div>
            </div>

            <!-- Contenu principal -->
            <div class="container">
                <div class="question-card">
                    <!-- Question -->
                    <div class="question-header">
                        <h1 id="question-text">Question sera affich√©e ici</h1>
                        <p id="question-type" class="question-type">Type de r√©ponse</p>
                    </div>

                    <!-- S√©lecteur de type de r√©ponse -->
                    <div id="response-selector" class="response-selector hidden">
                        <button id="text-mode-btn" class="mode-btn">
                            <i data-lucide="file-text"></i>
                            R√©ponse √©crite
                        </button>
                        <button id="audio-mode-btn" class="mode-btn">
                            <i data-lucide="mic"></i>
                            R√©ponse audio
                        </button>
                    </div>

                    <!-- Interface de r√©ponse -->
                    <div id="response-interface" class="response-interface">
                        <!-- R√©ponse texte -->
                        <div id="text-response" class="response-section">
                            <textarea id="text-input" placeholder="Tapez votre r√©ponse ici..." rows="6"></textarea>
                        </div>

                        <!-- R√©ponse Oui/Non -->
                        <div id="yesno-response" class="response-section hidden">
                            <div class="yesno-buttons">
                                <button id="yes-btn" class="yesno-btn">Oui</button>
                                <button id="no-btn" class="yesno-btn">Non</button>
                            </div>
                        </div>

                        <!-- R√©ponse audio -->
                        <div id="audio-response" class="response-section hidden">
                            <!-- √âtat de l'enregistrement -->
                            <div id="recording-status" class="recording-status hidden">
                                <div class="status-info">
                                    <div class="status-indicator">
                                        <div id="status-dot" class="status-dot"></div>
                                        <span id="status-text">ENREGISTREMENT</span>
                                    </div>
                                    <div id="recording-timer" class="recording-timer">00:00</div>
                                </div>
                            </div>

                            <!-- Contr√¥les d'enregistrement -->
                            <div id="recording-controls" class="recording-controls">
                                <button id="start-recording-btn" class="btn-record">
                                    <i data-lucide="mic"></i>
                                    Commencer l'enregistrement
                                </button>
                                
                                <div id="active-controls" class="active-controls hidden">
                                    <button id="pause-btn" class="btn-control">
                                        <i data-lucide="pause"></i>
                                        Pause
                                    </button>
                                    <button id="resume-btn" class="btn-control hidden">
                                        <i data-lucide="play"></i>
                                        Reprendre
                                    </button>
                                    <button id="stop-btn" class="btn-control">
                                        <i data-lucide="mic-off"></i>
                                        Arr√™ter
                                    </button>
                                </div>
                            </div>

                            <!-- Playback et actions -->
                            <div id="playback-section" class="playback-section hidden">
                                <div class="playback-controls">
                                    <button id="play-btn" class="btn-play">
                                        <i data-lucide="play"></i>
                                    </button>
                                    <button id="pause-playback-btn" class="btn-play hidden">
                                        <i data-lucide="pause"></i>
                                    </button>
                                    <span id="audio-duration" class="audio-duration">Dur√©e : 00:00</span>
                                </div>
                                
                                <div class="audio-actions">
                                    <button id="delete-btn" class="btn-secondary">Supprimer</button>
                                    <button id="continue-btn" class="btn-secondary">
                                        <i data-lucide="mic"></i>
                                        Continuer l'enregistrement
                                    </button>
                                    <button id="validate-btn" class="btn-success">
                                        <i data-lucide="check"></i>
                                        Valider comme r√©ponse
                                    </button>
                                    <div id="validated-status" class="validated-status hidden">
                                        <i data-lucide="check"></i>
                                        R√©ponse valid√©e
                                    </div>
                                </div>
                            </div>

                            <audio id="audio-player" style="display: none;"></audio>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <div class="navigation">
                        <button id="prev-btn" class="btn-nav" disabled>
                            <i data-lucide="chevron-left"></i>
                            Pr√©c√©dent
                        </button>
                        
                        <button id="next-btn" class="btn-nav primary" disabled>
                            <span id="next-text">Suivant</span>
                            <i data-lucide="chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- √âcran de fin -->
        <div id="completion-screen" class="screen hidden">
            <div class="container">
                <div class="completion-card">
                    <div class="completion-header">
                        <div class="icon-circle success">
                            <i data-lucide="check"></i>
                        </div>
                        <h2>Questionnaire termin√© avec succ√®s !</h2>
                    </div>
                    
                    <div class="completion-content">
                        <div class="completion-section success">
                            <h3>üéâ Merci pour votre participation !</h3>
                            <p>Vos r√©ponses ont √©t√© enregistr√©es et transmises avec succ√®s. 
                               Notre √©quipe va maintenant proc√©der √† l'analyse automatique de vos donn√©es.</p>
                            <div class="response-count">
                                <strong id="total-responses">0 r√©ponses</strong> collect√©es et sauvegard√©es
                            </div>
                        </div>
                        
                        <div class="completion-section blue">
                            <h3>üîÑ Prochaines √©tapes :</h3>
                            <ul>
                                <li>‚Ä¢ <strong>Transcription automatique</strong> de vos r√©ponses audio</li>
                                <li>‚Ä¢ <strong>Analyse et r√©sum√©</strong> personnalis√© de votre projet</li>
                                <li>‚Ä¢ <strong>Rapport d√©taill√©</strong> envoy√© par email sous 24-48h</li>
                                <li>‚Ä¢ <strong>Recommandations</strong> adapt√©es √† votre secteur d'activit√©</li>
                            </ul>
                        </div>
                        
                        <div class="completion-section amber">
                            <h3>üìß Contact :</h3>
                            <p>Si vous avez des questions ou souhaitez des pr√©cisions, 
                               n'h√©sitez pas √† nous contacter. Nous reviendrons vers vous tr√®s prochainement !</p>
                        </div>
                    </div>
                    
                    <div class="completion-footer">
                        <p id="completion-time" class="completion-time"></p>
                        <button id="restart-btn" class="btn-secondary">Nouveau questionnaire</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading overlay -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-content">
                <div class="spinner"></div>
                <p>Envoi en cours...</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Initialiser les ic√¥nes Lucide
        lucide.createIcons();
    </script>
</body>
</html>
